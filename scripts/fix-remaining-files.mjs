#!/usr/bin/env node

import fs from 'fs';

const fixes = [
  {
    file: 'data/ja/geng.json',
    old: `  "description": "\\"梗\\"はネット用語で"笑いのツボ、ギャグ"の意味。ギャグやコメディを中心としたアニメや漫画作品を指す。",`,
    new: `  "description": "「梗」はネット用語で「笑いのツボ、ギャグ」の意味。ギャグやコメディを中心としたアニメや漫画作品を指す。",`
  },
  {
    file: 'data/ja/jie.json',
    old: `  "description": "「礼記」檀弓下にある\\"丧礼,哀戚之至也;\\"を出典とする言葉で、喪礼については、悲嘆、悲愁の極みでもある、という意味。「上纲」のさらに進んだ形であり、小さな問題を大きく取り上げるだけでなく、物事を皮肉る際にも使われる。",`,
    new: `  "description": "「礼記」檀弓下にある「丧礼,哀戚之至也;」を出典とする言葉で、喪礼については、悲嘆、悲愁の極みでもある、という意味。「上纲」のさらに進んだ形であり、小さな問題を大きく取り上げるだけでなく、物事を皮肉る際にも使われる。",`
  },
  {
    file: 'data/ja/lu.json',
    old: `  "description": "「男と女は、子どもを産む子宮という意味での「卵巣」が持つ権利でもある。つまり生まれてくる性別次第で人生が決まる」と言った内容を\\"卵巢彩票\\"の単語で表現している。中国では、男女の不平等により女性の方が職場や家庭等から抑圧を受けたり、差別的な待遇を受けることも多いため、女性として生まれた方が損だという考えがあることがこの単語からうかがえる。",`,
    new: `  "description": "「男と女は、子どもを産む子宮という意味での「卵巣」が持つ権利でもある。つまり生まれてくる性別次第で人生が決まる」と言った内容を「卵巢彩票」の単語で表現している。中国では、男女の不平等により女性の方が職場や家庭等から抑圧を受けたり、差別的な待遇を受けることも多いため、女性として生まれた方が損だという考えがあることがこの単語からうかがえる。",`
  },
  {
    file: 'data/ja/mai.json',
    old: `  "description": "\\"霸占着麦克风不放的\\"の意味。ライブ配信で、視聴者がマイクを霸占して意味のない話をし続けること。",`,
    new: `  "description": "「霸占着麦克风不放的」の意味。ライブ配信で、視聴者がマイクを霸占して意味のない話をし続けること。",`
  },
  {
    file: 'data/ja/shanggan.json',
    old: `  "description": "「(物事を政治的に)問題として大きく取り上げる」の意味。\\"上纲\\"は文化大革命の時代に作られた単語で、本来の意味は「物事を政治的な問題として昇格させる」。現代では、小さな過失を大げさに言う、または大きく取り上げることに変化し、使われている。",`,
    new: `  "description": "「(物事を政治的に)問題として大きく取り上げる」の意味。「上纲」は文化大革命の時代に作られた単語で、本来の意味は「物事を政治的な問題として昇格させる」。現代では、小さな過失を大げさに言う、または大きく取り上げることに変化し、使われている。",`
  },
  {
    file: 'data/ja/shuaiguo.json',
    old: `  "description": "\\"让别人来背黑锅\\"の意味。批判やミスの責任を他人に押し付ける行為。悪評を他人に転嫁するときなどに使用。",`,
    new: `  "description": "「让别人来背黑锅」の意味。批判やミスの責任を他人に押し付ける行為。悪評を他人に転嫁するときなどに使用。",`
  },
  {
    file: 'data/ja/si.json',
    old: `  "description": "古代の数字の\\"4\\"の書き方。大写(大字とも)は、記帳や法的文書において改竄を防ぐための漢数字の代替書体。銀行振込票など金額を記入する際に使われる。",`,
    new: `  "description": "古代の数字の「4」の書き方。大写(大字とも)は、記帳や法的文書において改竄を防ぐための漢数字の代替書体。銀行振込票など金額を記入する際に使われる。",`
  },
  {
    file: 'data/ja/zhenxiang.json',
    old: `  "description": "「真っ先に立派なこと言っていたけど、実際にはすぐ裏切った」とき、「本当に良いことが分かる」の\\"真香\\"だけを使用して皮肉的に揶揄する言い方。2018年にバラエティ番組「変形記」の一編「農村的味道(田舎の味)」にて、都会の子供と農村の子供を一定期間入れ替えて生活させる企画があり、都会の子が農村に来るのを嫌がり「私は絶対この料理を食べない」と言っていたのに、後に匂いの良さに負けて食べながら「とても良い香りだ」と言ったことから発生したネットミーム。",`,
    new: `  "description": "「真っ先に立派なこと言っていたけど、実際にはすぐ裏切った」とき、「本当に良いことが分かる」の「真香」だけを使用して皮肉的に揶揄する言い方。2018年にバラエティ番組「変形記」の一編「農村的味道(田舎の味)」にて、都会の子供と農村の子供を一定期間入れ替えて生活させる企画があり、都会の子が農村に来るのを嫌がり「私は絶対この料理を食べない」と言っていたのに、後に匂いの良さに負けて食べながら「とても良い香りだ」と言ったことから発生したネットミーム。",`
  },
  {
    file: 'data/ko/jiucai.json',
    old: `  "description": ""부추 베기(割韭菜)"는 \\"1. (투자 등에서) 호구 잡다 2. 교묘한 사기로 착취하다\\"라는 뜻이다. 부추는 척박한 땅에서도 잘 자라는 생명력이 있어 베어내도 금방 다시 자라난다. 그래서 투자 세계에 끊임없이 진입하는 초보 투자자들을 "부추"에 비유하여 수확당하는 존재로 표현한다.",`,
    new: `  "description": "「부추 베기(割韭菜)」는 「1. (투자 등에서) 호구 잡다 2. 교묘한 사기로 착취하다」라는 뜻이다. 부추는 척박한 땅에서도 잘 자라는 생명력이 있어 베어내도 금방 다시 자라난다. 그래서 투자 세계에 끊임없이 진입하는 초보 투자자들을 「부추」에 비유하여 수확당하는 존재로 표현한다.",`
  },
  {
    file: 'data/ko/ju.json',
    old: `  "description": "격렬한 사회 경쟁을 뜻하는 인볼루션(involution, 内卷)에서 뒤처지고 승리할 수 없는 상태를 뜻한다. 卷不动了는 \\"(경쟁에서 이길 수 없어서) 더 이상 애쓰고 싶지 않다\\"라는 뜻이다.",`,
    new: `  "description": "격렬한 사회 경쟁을 뜻하는 인볼루션(involution, 内卷)에서 뒤처지고 승리할 수 없는 상태를 뜻한다. 卷不动了는 「(경쟁에서 이길 수 없어서) 더 이상 애쓰고 싶지 않다」라는 뜻이다.",`
  },
  {
    file: 'data/ko/jueju.json',
    old: `  "description": "북방 방언에서 유래된 칭찬 속어로, 놀라움과 찬사를 표현한다. Jue(绝)는 \\"유일무이하다, 대단하다\\"라는 뜻으로, 누군가를 굉장하거나 놀랍다고 칭찬할 때 자주 사용된다. 공식적인 문맥에서 绝은 \\"막다, 끊다\\"라는 뜻이지만, 绝了로 사용하면 무언가의 정점을 강조한다. 가끔 子(zǐ)와 결합하여 绝子(jué zi)로 사용되며, 재미있고 친근한 톤을 더한다. 최근에는 活(huó, \\"살아있는, 일, 직업\\")을 추가해 绝活(jué huó, \\"특별한 재능, 특기, 기술\\")를 만든다. 이 표현은 처음에는 중립적인 \\"특별한 기술\\"을 의미했지만, 시간이 지나면서 인상적인 것을 표현하게 되었다. 绝活은 jué huor(儿 er은 권설음 어미)로도 발음된다.",`,
    new: `  "description": "북방 방언에서 유래된 칭찬 속어로, 놀라움과 찬사를 표현한다. Jue(绝)는 「유일무이하다, 대단하다」라는 뜻으로, 누군가를 굉장하거나 놀랍다고 칭찬할 때 자주 사용된다. 공식적인 문맥에서 绝은 「막다, 끊다」라는 뜻이지만, 绝了로 사용하면 무언가의 정점을 강조한다. 가끔 子(zǐ)와 결합하여 绝子(jué zi)로 사용되며, 재미있고 친근한 톤을 더한다. 최근에는 活(huó, 「살아있는, 일, 직업」)을 추가해 绝活(jué huó, 「특별한 재능, 특기, 기술」)를 만든다. 이 표현은 처음에는 중립적인 「특별한 기술」을 의미했지만, 시간이 지나면서 인상적인 것을 표현하게 되었다. 绝活은 jué huor(儿 er은 권설음 어미)로도 발음된다.",`
  },
  {
    file: 'data/ko/kelian.json',
    old: `  "description": "가엾다는 뜻으로 동정이 필요한 사람에게 사용한다. 구어적 표현으로 다른 사람이 곤경에 빠지거나, 불쌍하거나, 곤란한 상황에 처했을 때 사용한다. 상황에 따라서는 어떤 사람을 可憐(가련)하다고 해도 \\"진짜 불쌍함\\"과는 반대의 의미로 사용될 수 있다. 특히 온라인에서 놀림받을 만한 어떤 바보 같은 짓을 했을 때 쓰인다.",`,
    new: `  "description": "가엾다는 뜻으로 동정이 필요한 사람에게 사용한다. 구어적 표현으로 다른 사람이 곤경에 빠지거나, 불쌍하거나, 곤란한 상황에 처했을 때 사용한다. 상황에 따라서는 어떤 사람을 可憐(가련)하다고 해도 「진짜 불쌍함」과는 반대의 의미로 사용될 수 있다. 특히 온라인에서 놀림받을 만한 어떤 바보 같은 짓을 했을 때 쓰인다.",`
  },
  {
    file: 'data/th/jueju.json',
    old: `  "description": "คำสแลงชมเชยที่มีต้นกำเนิดจากภาษาถิ่นทางภาคเหนือ แสดงถึงความประหลาดใจและการชื่นชม Jue (绝) มีความหมายว่า \\"ไม่มีใครเทียบได้, แน่นอน\\" และมักใช้เพื่อชมเชยใครบางคนว่าเจ๋งหรือน่าทึ่ง ในบริบทที่เป็นทางการ 绝 หมายถึง \\"ปิดกั้น, สูญพันธุ์\\" เมื่อใช้เป็น 绝了 จะเน้นย้ำถึงจุดสูงสุดของบางสิ่ง บางครั้งรวมกับ 子 (zǐ) เป็น 绝子 (jué zi) เพื่อเพิ่มน้ำเสียงที่สนุกสนานและเป็นกันเอง การพัฒนาล่าสุดเพิ่มอักษร 活 (huó) ที่แปลว่า \\"มีชีวิต, งาน, อาชีพ\\" เพื่อสร้าง 绝活 (jué huó) ที่แปลว่า \\"พรสวรรค์เฉพาะตัว, ความเชี่ยวชาญ, ทักษะ\\" วลีนี้เริ่มต้นเป็นคำที่เป็นกลางสำหรับ \\"ทักษะพิเศษ\\" แต่เมื่อเวลาผ่านไปกลายเป็นคำที่เกี่ยวข้องกับสิ่งที่น่าประทับใจ 绝活 ยังสามารถออกเสียงเป็น jué huor (儿 er เป็นการออกเสียงแบบม้วนลิ้น)",`,
    new: `  "description": "คำสแลงชมเชยที่มีต้นกำเนิดจากภาษาถิ่นทางภาคเหนือ แสดงถึงความประหลาดใจและการชื่นชม Jue (绝) มีความหมายว่า 「ไม่มีใครเทียบได้, แน่นอน」 และมักใช้เพื่อชมเชยใครบางคนว่าเจ๋งหรือน่าทึ่ง ในบริบทที่เป็นทางการ 绝 หมายถึง 「ปิดกั้น, สูญพันธุ์」 เมื่อใช้เป็น 绝了 จะเน้นย้ำถึงจุดสูงสุดของบางสิ่ง บางครั้งรวมกับ 子 (zǐ) เป็น 绝子 (jué zi) เพื่อเพิ่มน้ำเสียงที่สนุกสนานและเป็นกันเอง การพัฒนาล่าสุดเพิ่มอักษร 活 (huó) ที่แปลว่า 「มีชีวิต, งาน, อาชีพ」 เพื่อสร้าง 绝活 (jué huó) ที่แปลว่า 「พรสวรรค์เฉพาะตัว, ความเชี่ยวชาญ, ทักษะ」 วลีนี้เริ่มต้นเป็นคำที่เป็นกลางสำหรับ 「ทักษะพิเศษ」 แต่เมื่อเวลาผ่านไปกลายเป็นคำที่เกี่ยวข้องกับสิ่งที่น่าประทับใจ 绝活 ยังสามารถออกเสียงเป็น jué huor (儿 er เป็นการออกเสียงแบบม้วนลิ้น)",`
  }
];

let fixed = 0;
let errors = 0;

for (const fix of fixes) {
  try {
    let content = fs.readFileSync(fix.file, 'utf-8');
    if (content.includes(fix.old)) {
      content = content.replace(fix.old, fix.new);
      fs.writeFileSync(fix.file, content, 'utf-8');
      
      // Validate
      try {
        JSON.parse(content);
        console.log(`✅ ${fix.file}`);
        fixed++;
      } catch (e) {
        console.log(`❌ ${fix.file}: ${e.message.substring(0, 60)}`);
        errors++;
      }
    } else {
      console.log(`⚠️  ${fix.file}: Pattern not found`);
    }
  } catch (error) {
    console.log(`❌ ${fix.file}: ${error.message}`);
    errors++;
  }
}

console.log(`\n✅ Fixed: ${fixed}, ❌ Errors: ${errors}`);
